import 'package:flutter/material.dart';
import 'package:{{ snakeCase appName }}/app/core/theme/app_colors_data.dart';
import 'package:{{ snakeCase appName }}/app/core/theme/app_color_extension.dart';
import 'package:{{ snakeCase appName }}/app/core/theme/ui_config.dart';
import 'package:{{ snakeCase appName }}/app/core/theme/app_typography.dart';
import 'package:{{ snakeCase appName }}/app/core/theme/app_typography_extension.dart';
import 'package:{{ snakeCase appName }}/app/core/localization/localization_service.dart';

class AppTheme {
  AppTheme._();
  static const double globalRadius = {{ design.radius }}.0;
  static const double globalInputsRadius = {{ design.radius }}.0;
  static const double globalButtonsRadius = {{ design.radius }}.0;  // Light theme colors
  static const lightColors = AppColorsData(
    background: Color(0xFF{{stripHexHash design.lightTheme.backgroundColor}}),
    foreground: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    primary: Color(0xFF{{stripHexHash design.lightTheme.primaryColor}}),
    primaryForeground: Color(0xFF{{stripHexHash design.lightTheme.primaryForegroundColor}}),
    secondary: Color(0xFF{{stripHexHash design.lightTheme.cardColor}}),
    secondaryForeground: Color(0xFF{{stripHexHash design.lightTheme.cardForegroundColor}}),
    accent: Color(0xFF{{stripHexHash design.lightTheme.primaryColor}}),
    accentForeground: Color(0xFF{{stripHexHash design.lightTheme.primaryForegroundColor}}),
    muted: Color(0xFF{{stripHexHash design.lightTheme.mutedColor}}),
    mutedForeground: Color(0xFF{{stripHexHash design.lightTheme.mutedForegroundColor}}),
    card: Color(0xFF{{stripHexHash design.lightTheme.cardColor}}),
    cardForeground: Color(0xFF{{stripHexHash design.lightTheme.cardForegroundColor}}),
    border: Color(0xFF{{stripHexHash design.lightTheme.borderColor}}),
    input: Color(0xFF{{stripHexHash design.lightTheme.inputColor}}),
    inputForeground: Color(0xFF{{stripHexHash design.lightTheme.inputForegroundColor}}),
    destructive: Color(0xFFFF0000),
    destructiveForeground: Color(0xFFFFFFFF),
    success: Color(0xFF22C55E),
    successForeground: Color(0xFFFFFFFF),
    productCard: Color(0xFF{{stripHexHash design.lightTheme.cardColor}}),
  );

  // Dark theme colors
  static const darkColors = AppColorsData(
    background: Color(0xFF{{stripHexHash design.darkTheme.backgroundColor}}),
    foreground: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    primary: Color(0xFF{{stripHexHash design.darkTheme.primaryColor}}),
    primaryForeground: Color(0xFF{{stripHexHash design.darkTheme.primaryForegroundColor}}),
    secondary: Color(0xFF{{stripHexHash design.darkTheme.cardColor}}),
    secondaryForeground: Color(0xFF{{stripHexHash design.darkTheme.cardForegroundColor}}),
    accent: Color(0xFF{{stripHexHash design.darkTheme.primaryColor}}),
    accentForeground: Color(0xFF{{stripHexHash design.darkTheme.primaryForegroundColor}}),
    muted: Color(0xFF{{stripHexHash design.darkTheme.mutedColor}}),
    mutedForeground: Color(0xFF{{stripHexHash design.darkTheme.mutedForegroundColor}}),
    card: Color(0xFF{{stripHexHash design.darkTheme.cardColor}}),
    cardForeground: Color(0xFF{{stripHexHash design.darkTheme.cardForegroundColor}}),
    border: Color(0xFF{{stripHexHash design.darkTheme.borderColor}}),
    input: Color(0xFF{{stripHexHash design.darkTheme.inputColor}}),
    inputForeground: Color(0xFF{{stripHexHash design.darkTheme.inputForegroundColor}}),
    destructive: Color(0xFFff1a1a),
    destructiveForeground: Color(0xFFFFFFFF),
    success: Color(0xFF16A34A),
    successForeground: Color(0xFFFFFFFF),
    productCard: Color(0xFF{{stripHexHash design.darkTheme.cardColor}}),
  );

  // Light theme text styles
  static const lightTextStyles = AppTextStylesData(
    h1: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSize3XLarge,
      fontWeight: AppTypography.bold,
      letterSpacing: AppTypography.letterSpacingTight,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    h2: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSize2XLarge,
      fontWeight: AppTypography.bold,
      letterSpacing: AppTypography.letterSpacingTight,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    h3: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeXLarge,
      fontWeight: AppTypography.semiBold,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    h4: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeLarge,
      fontWeight: AppTypography.semiBold,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    h5: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeMedium,
      fontWeight: AppTypography.semiBold,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    subtitle1: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeMedium,
      fontWeight: AppTypography.medium,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    subtitle2: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeRegular,
      fontWeight: AppTypography.medium,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    bodyLarge: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeMedium,
      fontWeight: AppTypography.regular,
      letterSpacing: AppTypography.letterSpacingNormal,
      height: AppTypography.lineHeightNormal,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    bodyMedium: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeRegular,
      fontWeight: AppTypography.regular,
      letterSpacing: AppTypography.letterSpacingNormal,
      height: AppTypography.lineHeightNormal,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    bodySmall: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeSmall,
      fontWeight: AppTypography.regular,
      letterSpacing: AppTypography.letterSpacingNormal,
      height: AppTypography.lineHeightNormal,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    buttonText: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeRegular,
      fontWeight: AppTypography.medium,
      letterSpacing: AppTypography.letterSpacingWide,
      color: Color(0xFF{{stripHexHash design.lightTheme.foregroundColor}}),
    ),
    caption: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeSmall,
      fontWeight: AppTypography.regular,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.lightTheme.mutedForegroundColor}}),
    ),
    overline: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeSmall,
      fontWeight: AppTypography.medium,
      letterSpacing: AppTypography.letterSpacingWide,
      color: Color(0xFF{{stripHexHash design.lightTheme.mutedForegroundColor}}),
      height: 1.5,
    ),
  );
    // Dark theme text styles
  static const darkTextStyles = AppTextStylesData(
    h1: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSize3XLarge,
      fontWeight: AppTypography.bold,
      letterSpacing: AppTypography.letterSpacingTight,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    h2: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSize2XLarge,
      fontWeight: AppTypography.bold,
      letterSpacing: AppTypography.letterSpacingTight,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    h3: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeXLarge,
      fontWeight: AppTypography.semiBold,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    h4: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeLarge,
      fontWeight: AppTypography.semiBold,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    h5: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeMedium,
      fontWeight: AppTypography.semiBold,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    subtitle1: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeMedium,
      fontWeight: AppTypography.medium,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    subtitle2: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeRegular,
      fontWeight: AppTypography.medium,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    bodyLarge: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeMedium,
      fontWeight: AppTypography.regular,
      letterSpacing: AppTypography.letterSpacingNormal,
      height: AppTypography.lineHeightNormal,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    bodyMedium: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeRegular,
      fontWeight: AppTypography.regular,
      letterSpacing: AppTypography.letterSpacingNormal,
      height: AppTypography.lineHeightNormal,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    bodySmall: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeSmall,
      fontWeight: AppTypography.regular,
      letterSpacing: AppTypography.letterSpacingNormal,
      height: AppTypography.lineHeightNormal,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    buttonText: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeRegular,
      fontWeight: AppTypography.medium,
      letterSpacing: AppTypography.letterSpacingWide,
      color: Color(0xFF{{stripHexHash design.darkTheme.foregroundColor}}),
    ),
    caption: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeSmall,
      fontWeight: AppTypography.regular,
      letterSpacing: AppTypography.letterSpacingNormal,
      color: Color(0xFF{{stripHexHash design.darkTheme.mutedForegroundColor}}),
    ),
    overline: TextStyle(
      fontFamily: AppTypography.primaryFont,
      fontSize: UIConfig.fontSizeSmall,
      fontWeight: AppTypography.medium,
      letterSpacing: AppTypography.letterSpacingWide,
      color: Color(0xFF{{stripHexHash design.darkTheme.mutedForegroundColor}}),
      height: 1.5,
    ),
  );

  // Light theme
  static ThemeData light() {
    return _createTheme(lightColors, lightTextStyles);
  }

  // Dark theme
  static ThemeData dark() {
    return _createTheme(darkColors, darkTextStyles);
  }

  // Helper method to create ThemeData
  static ThemeData _createTheme(
    AppColorsData colors,
    AppTextStylesData textStyles,
  ) {
    return ThemeData(
      brightness:
          colors.background.computeLuminance() > 0.5
              ? Brightness.light
              : Brightness.dark,
      primaryColor: colors.primary,
      scaffoldBackgroundColor: colors.background,
      cardColor: colors.card,
      dividerColor: colors.border,
      colorScheme: ColorScheme(
        primary: colors.primary,
        secondary: colors.secondary,
        surface: colors.background,
        error: colors.destructive,
        onPrimary: colors.primaryForeground,
        onSecondary: colors.secondaryForeground,
        onSurface: colors.foreground,
        onError: colors.destructiveForeground,
        brightness:
            colors.background.computeLuminance() > 0.5
                ? Brightness.light
                : Brightness.dark,
      ),

      // global input decoration theme
      inputDecorationTheme: InputDecorationTheme(
        contentPadding: const EdgeInsets.symmetric(
          horizontal: UIConfig.paddingLarge,
          vertical: UIConfig.paddingSmall,
        ),
        hintStyle: textStyles.bodyMedium.copyWith(
          color: colors.mutedForeground,
        ),
        fillColor: colors.input,
        filled: true,        border: OutlineInputBorder(
          borderRadius: BorderRadius.circular(globalInputsRadius),
          borderSide: BorderSide.none,
        ),
        enabledBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(globalInputsRadius),
          borderSide: BorderSide.none,
        ),
        focusedBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(globalInputsRadius),
          borderSide: BorderSide(color: colors.primary),
        ),
        errorBorder: OutlineInputBorder(
          borderRadius: BorderRadius.circular(globalInputsRadius),
          borderSide: BorderSide(color: colors.destructive),
        ),
      ),      // Add global button themes
      elevatedButtonTheme: ElevatedButtonThemeData(
        style: ElevatedButton.styleFrom(
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(globalButtonsRadius),
          ),
          padding: const EdgeInsets.symmetric(
            vertical: UIConfig.paddingMedium,
            horizontal: UIConfig.paddingLarge,
          ),
          disabledBackgroundColor: colors.muted,
        ),
      ),

      textButtonTheme: TextButtonThemeData(
        style: TextButton.styleFrom(
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(globalButtonsRadius),
          ),
        ),
      ),

      outlinedButtonTheme: OutlinedButtonThemeData(
        style: OutlinedButton.styleFrom(
          shape: RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(globalButtonsRadius),
          ),
          padding: const EdgeInsets.symmetric(
            vertical: UIConfig.paddingMedium,
            horizontal: UIConfig.paddingLarge,
          ),
        ),
      ),

      // Add text theme
      textTheme: TextTheme(
        displayLarge: textStyles.h1,
        displayMedium: textStyles.h2,
        displaySmall: textStyles.h3,
        headlineMedium: textStyles.h4,
        headlineSmall: textStyles.h5,
        titleLarge: textStyles.subtitle1,
        titleMedium: textStyles.subtitle2,
        bodyLarge: textStyles.bodyLarge,
        bodyMedium: textStyles.bodyMedium,
        bodySmall: textStyles.bodySmall,
        labelLarge: textStyles.buttonText,
        labelSmall: textStyles.overline,
      ),

      extensions: [
        AppColorExtension.fromAppColorsData(colors),
        AppTypographyExtension.fromAppTextStylesData(textStyles),
      ],
    );
  }
}